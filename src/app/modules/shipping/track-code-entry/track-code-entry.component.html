<div class="container-fluid mt-4">
  <!-- Arama Kutusu -->
  <div class="row mb-4">
    <div class="col-lg-6">
      <div class="input-group input-group-lg shadow-sm">
        <input
          type="text"
          class="form-control"
          placeholder="Takip numarasÄ± giriniz"
          [(ngModel)]="shipmentId"
        />
        <button
          class="btn btn-success"
          type="button"
          (click)="search()"
          [disabled]="loading"
        >
          <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
          ğŸš€ Sorgula
        </button>
      </div>
    </div>
  </div>

  <!-- EÄŸer detay geldiyse -->
  <div *ngIf="detail">
    <div class="row">
      <!-- Sol Ã–zet Alan -->
      <div class="col-lg-4 mb-4">
        <div class="p-3 border rounded mb-3 bg-light shadow-sm">
          <h6 class="fw-bold text-muted">GÃ¶nderi NumarasÄ±</h6>
          <p class="fs-5 fw-bold text-dark">{{ detail.shipment?.shipmentId }}</p>
        </div>

        <div class="p-3 border rounded mb-3 bg-light shadow-sm">
          <h6 class="fw-bold text-muted">Tahmini Teslimat</h6>
          <p class="mb-0 text-dark">
            {{ detail.shipment?.estimatedDeliveryDate }}<br />
            <small class="text-muted">1-3 iÅŸ gÃ¼nÃ¼dÃ¼r</small>
          </p>
        </div>

        <div class="p-3 border rounded mb-3 bg-light shadow-sm">
          <h6 class="fw-bold text-muted">AlÄ±cÄ± AdÄ±</h6>
          <p class="fs-5 fw-bold text-dark">{{ detail.recipient?.fullName }}</p>
        </div>

        <div class="p-3 border rounded bg-light shadow-sm">
          <h6 class="fw-bold text-muted">GÃ¶nderi Ã‡Ä±kÄ±ÅŸ Tarihi</h6>
          <p class="fs-6 text-dark">{{ detail.shipment?.shipmentDateTime }}</p>
        </div>
      </div>

      <!-- SaÄŸ Detay Alan -->
      <div class="col-lg-8">
        <div class="card shadow-sm border-0">
          <div class="card-header bg-white">
            <h5 class="fw-bold text-dark mb-0">ğŸ“‘ GÃ¶nderi DetayÄ±</h5>
          </div>
          <div class="card-body">
            <div class="row mb-3">
              <div class="col-md-6">
                <strong>AlÄ±cÄ± Adresi</strong>
                <p>{{ detail.recipient?.address }}</p>
              </div>

              <div class="col-md-6">
                <strong>Teslimat Birimi</strong>
                <p>{{ detail.recipient?.city }} {{ detail.recipient?.district }}</p>
              </div>

              <div class="col-md-6">
                <strong>GÃ¶nderi TÃ¼rÃ¼</strong>
                <p>
                  {{ detail.shipment?.pieceCount }} Adet Paket â€¢
                  {{ detail.shipment?.totalDesi }} Desi
                </p>
              </div>

              <div class="col-md-6">
                <strong>SipariÅŸ NumarasÄ±</strong>
                <p>#{{ detail.shipment?.referenceId }}</p>
              </div>

              <div class="col-md-6">
                <strong>Ã–deme ve Teslim Tipi</strong>
                <p>
                  {{ detail.shipment?.paymentType }} â€¢
                  {{ detail.shipment?.deliveryType }}
                </p>
              </div>
            </div>

            <!-- KapÄ±da Ã–deme TutarÄ± -->
            <div
              *ngIf="detail.shipment?.isCOD === 1"
              class="p-3 bg-light border rounded mt-3"
            >
              <h6 class="fw-bold text-dark mb-1">ğŸ’° KapÄ±da Ã–deme TutarÄ±</h6>
              <p class="text-danger fw-bold fs-4 mb-0">
                {{ detail.shipment?.codAmount }} TL
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Hareket GeÃ§miÅŸi Timeline -->
<!-- Hareket GeÃ§miÅŸi Timeline -->
<div class="row mt-4" *ngIf="tracks && tracks.length > 0">
  <div class="col-12">
    <div class="card shadow-sm border-0">
      <div class="card-header bg-warning d-flex align-items-center">
        <h5 class="fw-bold mb-0 text-dark">ğŸšš GÃ¶nderi Hareketleri</h5>
      </div>
      <div class="card-body">
        <div class="mb-3">
          <strong>GÃ¶nderi Durumu :</strong>
          <span class="text-danger fw-bold">{{ status?.shipmentStatusExplanation }}</span>
        </div>

        <ul class="timeline list-unstyled">
          <li *ngFor="let t of tracks" class="timeline-item">
            <!-- Sol ikon -->
            <div class="timeline-icon"
              [ngClass]="{
                'bg-success': t.eventStatus?.includes('Teslim Edildi'),
                'bg-purple': t.eventStatus?.includes('YÃ¶nlendirildi') || t.eventStatus?.includes('Yolda'),
                'bg-warning': t.eventStatus?.includes('Transfer'),
                'bg-danger': t.eventStatus?.includes('Edilemedi'),
                'bg-info': t.eventStatus?.includes('HazÄ±rlandÄ±')
              }"
            >
              <i class="bi"
                [ngClass]="{
                  'bi-check-circle': t.eventStatus?.includes('Teslim Edildi'),
                  'bi-truck': t.eventStatus?.includes('YÃ¶nlendirildi') || t.eventStatus?.includes('Yolda'),
                  'bi-arrow-left-right': t.eventStatus?.includes('Transfer'),
                  'bi-x-circle': t.eventStatus?.includes('Edilemedi'),
                  'bi-box-seam': t.eventStatus?.includes('HazÄ±rlandÄ±')
                }">
              </i>
            </div>

            <!-- Ä°Ã§erik -->
            <div class="timeline-content">
              <span class="timeline-date">
                {{ t.eventDateTime2 | date:'dd.MM.yyyy HH:mm' }}
              </span>
              <h6 class="fw-bold mb-1">{{ t.eventStatus }}</h6>
              <p class="mb-1">
                {{ t.description || ('GÃ¶nderiniz ' + (t.location || '') + ' biriminde iÅŸlem gÃ¶rmÃ¼ÅŸtÃ¼r.') }}
              </p>
              <small class="text-muted">{{ t.location }} {{ t.locationAddress }}</small>
              <div *ngIf="t.deliveryTo" class="mt-1">
                <small class="text-dark fw-bold">Teslim Alan: {{ t.deliveryTo }}</small>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

  </div>
</div>
