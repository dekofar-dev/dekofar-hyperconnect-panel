<div class="card">
  <div class="card-header">
    <h3 class="card-title">Kullanıcılar</h3>
  </div>
  <div class="card-body" *ngIf="!loading; else loadingTpl">
    <table class="table table-striped align-middle">
      <thead>
        <tr>
          <th>Kullanıcı</th>
          <th>Roller</th>
          <th>Toplam Satış</th>
          <th>Toplam Komisyon</th>
          <th>Destek Talebi</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let u of users">
          <td>
            <div class="d-flex align-items-center">
              <div class="symbol symbol-circle symbol-40px me-3">
                <img *ngIf="u.avatar" [src]="u.avatar" alt="avatar" />
                <span
                  *ngIf="!u.avatar"
                  class="symbol-label bg-light-primary text-primary fw-bold"
                  >{{ getInitials(u.fullName) }}</span
                >
              </div>
              <div class="d-flex flex-column">
                <span class="fw-bold">{{ u.fullName }}</span>
                <span class="text-muted">{{ u.email }}</span>
              </div>
            </div>
          </td>
          <td>{{ u.roles.join(', ') }}</td>
          <td>{{ u.totalSales }}</td>
          <td>{{ u.totalCommission }}</td>
          <td>{{ u.supportTicketCount }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <ng-template #loadingTpl>
    <div class="text-center py-10">
      <span class="spinner-border"></span>
    </div>
  </ng-template>
</div>
